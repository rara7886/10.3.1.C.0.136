ui_print("");
ui_print("");
ui_print("------------------------------------------------");
ui_print("@VERSION");
ui_print("    install Custom Kernel & Modules");
ui_print("");
ui_print("    by rara7886");
ui_print("------------------------------------------------");
ui_print("");
show_progress(1.000000, 0);

ui_print("flashing boot image...");
package_extract_file("boot.img", "/dev/block/platform/msm_sdcc.1/by-name/boot");
set_progress(0.330000);

ui_print("Mount device /system dir");
run_program("/sbin/busybox", "mount", "/system");
 
ui_print("Extract ZIP in system to device /system dir");
package_extract_dir("system", "/system");

ui_print("Set Permission");
set_perm(0, 0, 0644, "system/etc/firmware/wlan/prima/WCNSS_cfg.dat");
set_perm(0, 0, 0644, "system/etc/firmware/wlan/prima/WCNSS_qcom_cfg.ini");
set_perm(0, 0, 0644, "system/etc/firmware/wlan/prima/WCNSS_qcom_wlan_nv.bin");
set_perm(0, 0, 0644, "system/lib/modules/prima/prima_wlan.ko");
set_perm(0, 0, 0644, "system/lib/modules/cfg80211.ko");
#set_perm(0, 0, 0644, "system/lib/modules/texfat.ko");

ui_print("flash complete. Enjoy!");
set_progress(1.000000);

